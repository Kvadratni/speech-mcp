"use strict";(()=>{function c(e,t={}){let n=document.getElementById("uiStatus");n&&(n.textContent=`Intent: ${e} \u2014 ${JSON.stringify(t)}`),window.parent&&window.parent.postMessage({type:"intent",payload:{intent:e,params:t}},"*")}window.sendIntent=(e,t={})=>{c(e,t),e==="start_listening"&&(setListening(!0),setSpeaking(!1)),e==="stop"&&(setListening(!1),setSpeaking(!1))};window.onVoiceChange=e=>{c("set_voice",{voice:e});let t=document.getElementById("kpiVoice");t&&(t.textContent=e)};window.onThemeChange=e=>{a(e)};window.promptSpeak=()=>{let e=window.prompt("Text to speak");if(e&&e.trim()){setSpeaking(!0),setListening(!1);let t=document.getElementById("lastResponse");t&&(t.textContent=e.trim()),c("speak",{text:e.trim()}),setTimeout(()=>setSpeaking(!1),1600)}};function l(e){if(e){e.innerHTML="";for(let t=0;t<12;t++){let n=document.createElement("div");n.className="bar",e.appendChild(n)}}}window.setListening=e=>{let t=document.getElementById("kpiListening");t&&(t.textContent=e?"true":"false");let n=document.getElementById("listenWaves");n&&(n.style.opacity=e?"1":".35")};window.setSpeaking=e=>{let t=document.getElementById("kpiSpeaking");t&&(t.textContent=e?"true":"false");let n=document.getElementById("speakWaves");n&&(n.style.opacity=e?"1":".35")};l(document.getElementById("listenWaves"));l(document.getElementById("speakWaves"));var r=(document.getElementById("kpiListening")?.textContent||"false")==="true",m=(document.getElementById("kpiSpeaking")?.textContent||"false")==="true";window.setListening(r);window.setSpeaking(m);function a(e){let t=document.documentElement,n={midnight:{"--bg":"#0a0f1e","--panel":"#111729","--text":"#e8ecf1","--muted":"#99a3b3","--border":"#20283b","--accent":"#6ea8fe","--ok":"#38e1a8","--dim":"#56607a"},glacier:{"--bg":"#f6f7fb","--panel":"#ffffff","--text":"#0d1220","--muted":"#5c6785","--border":"#e4e8f0","--accent":"#3b82f6","--ok":"#10b981","--dim":"#9aa3b2"},emerald:{"--bg":"#0c1210","--panel":"#111814","--text":"#e7f0eb","--muted":"#97a39c","--border":"#1d2a23","--accent":"#34d399","--ok":"#22c55e","--dim":"#5a6a61"}},i=n[e]||n.midnight;Object.entries(i).forEach(([o,s])=>t.style.setProperty(o,s))}u();function u(){let t=typeof window.matchMedia=="function"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"midnight":"glacier";a(t);let n=document.getElementById("themeSelect");if(n&&(n.value=t),typeof window.matchMedia=="function"){let i=window.matchMedia("(prefers-color-scheme: dark)");"addEventListener"in i?i.addEventListener("change",o=>{let s=o.matches?"midnight":"glacier";a(s);let d=document.getElementById("themeSelect");d&&(d.value=s)}):"addListener"in i&&i.addListener(o=>{let s=o.matches?"midnight":"glacier";a(s);let d=document.getElementById("themeSelect");d&&(d.value=s)})}}function f(){let e=document.documentElement.scrollHeight,t=document.documentElement.scrollWidth,n={height:e,width:t};window.parent&&(window.parent.postMessage({type:"ui-size-change",payload:n},"*"),window.parent.postMessage({type:"size-change",payload:n},"*"))}(function(){let t=!1,n=()=>{t||(t=!0,requestAnimationFrame(()=>{t=!1,f()}))};if("ResizeObserver"in window){let i=new ResizeObserver(()=>n());i.observe(document.documentElement),i.observe(document.body)}else window.addEventListener("resize",n);document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n),setTimeout(n,0)})();})();
