"use strict";(()=>{function i(e,t={}){let n=document.getElementById("uiStatus");n&&(n.textContent=`Intent: ${e} \u2014 ${JSON.stringify(t)}`),window.parent&&window.parent.postMessage({type:"intent",payload:{intent:e,params:t}},"*")}window.sendIntent=(e,t={})=>{i(e,t),e==="start_listening"&&(setListening(!0),setSpeaking(!1)),e==="stop"&&(setListening(!1),setSpeaking(!1))};window.onVoiceChange=e=>{i("set_voice",{voice:e});let t=document.getElementById("kpiVoice");t&&(t.textContent=e)};window.onThemeChange=e=>{o(e)};window.promptSpeak=()=>{let e=window.prompt("Text to speak");if(e&&e.trim()){setSpeaking(!0),setListening(!1);let t=document.getElementById("lastResponse");t&&(t.textContent=e.trim()),i("speak",{text:e.trim()}),setTimeout(()=>setSpeaking(!1),1600)}};function s(e){if(e){e.innerHTML="";for(let t=0;t<12;t++){let n=document.createElement("div");n.className="bar",e.appendChild(n)}}}window.setListening=e=>{let t=document.getElementById("kpiListening");t&&(t.textContent=e?"true":"false");let n=document.getElementById("listenWaves");n&&(n.style.opacity=e?"1":".35")};window.setSpeaking=e=>{let t=document.getElementById("kpiSpeaking");t&&(t.textContent=e?"true":"false");let n=document.getElementById("speakWaves");n&&(n.style.opacity=e?"1":".35")};s(document.getElementById("listenWaves"));s(document.getElementById("speakWaves"));var l=(document.getElementById("kpiListening")?.textContent||"false")==="true",m=(document.getElementById("kpiSpeaking")?.textContent||"false")==="true";window.setListening(l);window.setSpeaking(m);function o(e){let t=document.documentElement,n={midnight:{"--bg":"#0a0f1e","--panel":"#111729","--text":"#e8ecf1","--muted":"#99a3b3","--border":"#20283b","--accent":"#6ea8fe","--ok":"#38e1a8","--dim":"#56607a"},glacier:{"--bg":"#f6f7fb","--panel":"#ffffff","--text":"#0d1220","--muted":"#5c6785","--border":"#e4e8f0","--accent":"#3b82f6","--ok":"#10b981","--dim":"#9aa3b2"},emerald:{"--bg":"#0c1210","--panel":"#111814","--text":"#e7f0eb","--muted":"#97a39c","--border":"#1d2a23","--accent":"#34d399","--ok":"#22c55e","--dim":"#5a6a61"}},a=n[e]||n.midnight;Object.entries(a).forEach(([d,c])=>t.style.setProperty(d,c))}function h(){var e=typeof window.matchMedia=="function"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"midnight":"glacier";o(e);var t=document.getElementById("themeSelect");t&&(t.value=e);if(typeof window.matchMedia=="function"){var n=window.matchMedia("(prefers-color-scheme: dark)");"addEventListener"in n?n.addEventListener("change",r=>{var u=r.matches?"midnight":"glacier";o(u);var f=document.getElementById("themeSelect");f&&(f.value=u)}):"addListener"in n&&n.addListener(r=>{var u=r.matches?"midnight":"glacier";o(u);var f=document.getElementById("themeSelect");f&&(f.value=u)})}}h();})();
